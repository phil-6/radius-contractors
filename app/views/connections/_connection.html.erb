<% other_user = connection.other_user(current_user) %>

<div class="card columns connection" id="<%= dom_id connection %>">
  <div class="card-body">
    <div class="controls">
      <%= link_to connection_path(connection),
                  data: {
                    turbo_method: :delete,
                    turbo_confirm: "Are you sure you want to delete your connection with #{other_user.first_name}?"
                  }, class: "icon-link link-danger" do %>
        <i class="fa-solid fa-trash"></i>
      <% end%>
    </div>
    <h3><%= other_user.full_name %></h3>
    <p class="mb-1">
      <i class="fa-solid fa-location-dot"></i>&nbsp;<%= other_user.town.humanize %>
    </p>
    <p class="mb-0">
      <%= pluralize(other_user.jobs.size, "job")%> by
      <%= pluralize(other_user.used_contractors.size, "contractor") %>
    </p>
    <p class="mb-0">
      <%= pluralize(other_user.ratings.size, "rating")%> for
      <%= pluralize(other_user.rated_contractors.size, "contractor") %>
    </p>
  </div>
</div>
